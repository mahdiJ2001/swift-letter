<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=600, height=700">
  <title>Swift Letter</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div id="app">
    <!-- Header -->
    <header class="header">
      <div class="logo">
        <svg class="logo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
        </svg>
        <span class="logo-text">Swift Letter</span>
      </div>
      <div class="user-info" id="userInfo">
        <span class="credits-badge" id="creditsBadge">Loading...</span>
      </div>
    </header>

    <!-- Auth Section (shown when not logged in) -->
    <div id="authSection" class="auth-section hidden">
      <div class="auth-card">
        <h2>Welcome to Swift Letter</h2>
        <p>Sign in to generate professional cover letters instantly</p>
        <button class="btn btn-primary btn-full" id="loginBtn">
          Sign In to Continue
        </button>
        <p class="auth-note">Don't have an account? <a href="#" id="signupLink">Sign up free</a></p>
      </div>
    </div>

    <!-- Main Content (shown when logged in) -->
    <div id="mainContent" class="main-content hidden">
      <!-- Resume Status Card -->
      <div class="status-card" id="resumeStatusCard">
        <div class="status-icon" id="resumeStatusIcon">
          <svg class="icon-check hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
            <polyline points="22 4 12 14.01 9 11.01"/>
          </svg>
          <svg class="icon-warning" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <line x1="12" y1="8" x2="12" y2="12"/>
            <line x1="12" y1="16" x2="12.01" y2="16"/>
          </svg>
        </div>
        <div class="status-content">
          <span class="status-text" id="resumeStatusText">Checking resume...</span>
          <button class="btn btn-sm btn-secondary" id="uploadResumeBtn">
            <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="17 8 12 3 7 8"/>
              <line x1="12" y1="3" x2="12" y2="15"/>
            </svg>
            Upload Resume
          </button>
        </div>
        <input type="file" id="resumeInput" accept=".pdf" class="hidden">
      </div>

      <!-- Job Description Section -->
      <div class="form-section">
        <div class="section-header">
          <h3>Job Description</h3>
          <button class="btn btn-sm btn-ghost" id="pasteBtn" title="Paste from clipboard">
            <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
            </svg>
            Paste
          </button>
        </div>
        <textarea 
          id="jobDescription" 
          class="textarea" 
          placeholder="Paste the job description here...

Include:
â€¢ Job title and company name
â€¢ Required skills and qualifications
â€¢ Job responsibilities
â€¢ Any specific requirements"
          rows="8"
        ></textarea>
        <div class="char-count" id="charCount">0 characters</div>
      </div>

      <!-- Language Selection -->
      <div class="form-section">
        <label class="form-label">Cover Letter Language</label>
        <div class="language-options">
          <label class="radio-option">
            <input type="radio" name="language" value="english" checked>
            <span class="radio-label">ðŸ‡ºðŸ‡¸ English</span>
          </label>
          <label class="radio-option">
            <input type="radio" name="language" value="french">
            <span class="radio-label">ðŸ‡«ðŸ‡· French</span>
          </label>
        </div>
      </div>

      <!-- Generate Button -->
      <button class="btn btn-primary btn-full btn-generate" id="generateBtn" disabled>
        <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
        </svg>
        <span id="generateBtnText">Generate Cover Letter</span>
      </button>

      <!-- Loading State -->
      <div id="loadingState" class="loading-state hidden">
        <div class="loading-spinner"></div>
        <p class="loading-text" id="loadingText">Generating your cover letter...</p>
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill"></div>
        </div>
      </div>
    </div>

    <!-- PDF Preview Modal -->
    <div id="pdfPreviewModal" class="modal hidden">
      <div class="modal-backdrop"></div>
      <div class="modal-content modal-large">
        <div class="modal-header">
          <h3>Cover Letter Preview</h3>
          <div class="modal-actions">
            <button class="btn btn-secondary" id="editLetterBtn">
              <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
              </svg>
              Edit
            </button>
            <button class="btn btn-primary" id="downloadPdfBtn">
              <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="7 10 12 15 17 10"/>
                <line x1="12" y1="15" x2="12" y2="3"/>
              </svg>
              Download PDF
            </button>
            <button class="btn btn-ghost modal-close" id="closePreviewBtn">
              <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="18" y1="6" x2="6" y2="18"/>
                <line x1="6" y1="6" x2="18" y2="18"/>
              </svg>
            </button>
          </div>
        </div>
        <div class="modal-body">
          <iframe id="pdfFrame" class="pdf-frame"></iframe>
        </div>
      </div>
    </div>

    <!-- Edit Modal -->
    <div id="editModal" class="modal hidden">
      <div class="modal-backdrop"></div>
      <div class="modal-content modal-large">
        <div class="modal-header">
          <h3>Edit Cover Letter</h3>
          <button class="btn btn-ghost modal-close" id="closeEditBtn">
            <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"/>
              <line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
          </button>
        </div>
        <div class="modal-body edit-body">
          <div class="edit-fields">
            <div class="field-row">
              <div class="field-group">
                <label>Recipient Name</label>
                <input type="text" id="editRecipient" class="input" placeholder="Hiring Manager">
              </div>
              <div class="field-group">
                <label>Company</label>
                <input type="text" id="editCompany" class="input" placeholder="Company Name">
              </div>
            </div>
            <div class="field-row">
              <div class="field-group">
                <label>Position</label>
                <input type="text" id="editPosition" class="input" placeholder="Job Title">
              </div>
              <div class="field-group">
                <label>Subject</label>
                <input type="text" id="editSubject" class="input" placeholder="Application for...">
              </div>
            </div>
          </div>
          <div class="field-group full-width">
            <label>Letter Content</label>
            <textarea id="editContent" class="textarea edit-textarea" rows="12"></textarea>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" id="cancelEditBtn">Cancel</button>
          <button class="btn btn-primary" id="recompileBtn">
            <svg class="btn-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="23 4 23 10 17 10"/>
              <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
            </svg>
            Recompile PDF
          </button>
        </div>
      </div>
    </div>

    <!-- Error Toast -->
    <div id="errorToast" class="toast toast-error hidden">
      <svg class="toast-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"/>
        <line x1="15" y1="9" x2="9" y2="15"/>
        <line x1="9" y1="9" x2="15" y2="15"/>
      </svg>
      <span id="errorMessage"></span>
    </div>

    <!-- Success Toast -->
    <div id="successToast" class="toast toast-success hidden">
      <svg class="toast-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
        <polyline points="22 4 12 14.01 9 11.01"/>
      </svg>
      <span id="successMessage"></span>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
